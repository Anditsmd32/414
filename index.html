<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FOUR1FOUR - Passive Income and Free Atropa Payouts">
    <title>FOUR1FOUR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
        html {
            font-family: "Poppins", sans-serif;
            font-weight: 400;
            font-style: normal;
            scroll-behavior: smooth;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .sticky-div {
            position: sticky;
            top: 0;
            z-index: 10;
        }

        h1 {
            text-align: center;
        }

        #balances {
            margin-top: 20px;
            font-size: 16px;
        }

        .token {
            margin: 10px 0;
        }

        .total-value {
            font-weight: bold;
            margin-top: 20px;
        }

        .head1,#head1 {
            font-size: 28px;
            font-weight: bold;
        }

        /* Responsive styles */
        @media (max-width: 1100px) {
            .sticky-div > div,
            div[style*="width:1100px"] {
                width: 100% !important;
                padding-left: 15px !important;
                padding-right: 15px !important;
            }
        }

        @media (max-width: 768px) {
            .sticky-div > div {
                font-size: 14px;
            }

            .sticky-div span[style*="float:right"] {
                float: none !important;
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                margin-top: 10px;
            }

            .sticky-div span[style*="float:right"] a {
                margin: 5px;
            }

            div[style*="padding-right:500px"] {
                padding-right: 15px !important;
            }

            iframe {
                width: 100%;
                height: auto;
                aspect-ratio: 16 / 9;
            }
        }

        @media (max-width: 480px) {
            .head1, #head1 {
                font-size: 24px;
            }

            h2 {
                font-size: 20px;
            }

            div[style*="height:450px"],
            div[style*="height:650px"],
            div[style*="height:800px"] {
                height: auto !important;
                min-height: 300px;
            }
        }
    </style>
</head>
<body>
    <nav class="sticky-nav sticky-div">
        <div class="container nav-content">
            <div class="logo">FOUR<span style="color:var(--primary-color);font-weight:bold;">1</span>FOUR</div>
            <div class="nav-links">
                <a href="#home">HOME</a>
                <a href="#features">FEATURES</a>
                <a href="#tokenomics">TOKENOMICS</a>
                <a href="#liquidity">LIQUIDITY</a>
                <a href="#atropa-printer">ATROPA PRINTER</a>
                <a href="#videos">VIDEOS</a>
                <a href="#community">COMMUNITY</a>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <section id="home" class="hero">
        <div class="hero-content">
            <h1>FOUR1FOUR HOLDERS GET FREE ATROPA PAYOUTS</h1>
            <p>Join the revolution in passive income generation</p>
        </div>
    </section>

    <section id="presale" class="presale">
        <div class="container">
            <h2>PRESALE</h2>
            <div id="balances">Loading...</div>
        </div>
    </section>

    <section id="how-to-participate" class="how-to-participate">
        <div class="container">
            <h2>How to participate in the Four1Four presale?</h2>
            <p>Send your tokens to the following address to join the presale:</p>
            <p style="font-weight: bold;color: var(--primary-color);">0xe101c45cb2352059139205177e29d16184db513b</p>
            <h3>Accepted Tokens:</h3>
            <ul>
                <li>eDAI (DAI from Ethereum on Pulsechain)</li>
                <li>pDAI (Forked Copy)</li>
                <li>RH Core Tokens</li>
                <li>414 Core Tokens (except illiquid 666 tokens)</li>
                <li>X, PTGC, UFO</li>
                <li>Any Stablecoin on Pulsechain</li>
            </ul>
            <p>You can ask in the Telegram group if you're unsure if your token will be accepted</p>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <div class="features-content">
                <h2>FOUR<span style="color:var(--primary-color);font-weight:bold;">1</span>FOUR FEATURES</h2>
                <h3>Build Passive Income Effortlessly</h3>
                <p>Why work harder when your money can work for you? With Four1Four, growing your income has never been easier. Make your investment, sit back, and watch it thriveâ€”no ongoing effort required.</p>
                <h3>Earn Regular Dividends</h3>
                <p>Reap the rewards of your smart decisions with consistent ATROPA payments sent directly to your wallet. Already holding $INCOME? Then you know the value and reliability of these payouts.</p>
                <h3>A Safe Haven for Your Investments</h3>
                <p>Your trust and security are our top priorities. All liquidity pools (LPs) are permanently burned, contracts are secure and transparent, and rug pulls are impossible. With Four1Four, you're investing in a fully committed safe haven for crypto enthusiasts.</p>
            </div>
        </div>
    </section>

    <section class="contract-address">
        <div class="container">
            <h2>CONTRACT ADDRESS: TBC</h2>
        </div>
    </section>

    <section id="tokenomics" class="tokenomics">
        <div class="container">
            <h2>TOTAL SUPPLY: 414 TOKENS</h2>
        </div>
    </section>

    <section id="liquidity" class="liquidity">
        <div class="container">
            <h2>No Staking, No Claiming, Just Rewards!</h2>
        </div>
    </section>

    <section id="atropa-printer" class="atropa-printer">
        <div class="container">
            <input type="text" placeholder="Enter wallet address">
            <button>Print Atropa</button>
            <p>Atropa being printed: 500 ATROPA</p>
            <p>Total Atropa printed: 10,000 ATROPA</p>
        </div>
    </section>

    <section id="videos" class="videos">
        <div class="container">
            <h2>Videos about the Four1Four project:</h2>
            <iframe src="https://www.youtube.com/embed/-mzNWNzv11U" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <iframe src="https://www.youtube.com/embed/OAUo7xAnAXI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </section>

    <section id="community" class="community">
        <div class="container">
            <h2>Join Our Community!</h2>
            <a href="https://t.me/TheFour1Four" target="_blank">
                <button>GO TO TELEGRAM</button>
            </a>
        </div>
    </section>

    <script>
        // Initialize Web3
        const web3 = new Web3("https://rpc.pulsechain.com");

        const daiTokenAddress = "0x6B175474E89094C44Da98b954EedeAC495271d0F";
        const lpContractAddress = "0xfC64556FAA683e6087F425819C7Ca3C558e13aC1";
        const wplsAddress = "0xa1077a294dde1b09bb078844df40758a5d0f9a27";
        const atropaAddress = "0xCc78a0acDF847A2C1714d2a925bB4477df5D48a6";

        const lpAbi = [
            {
                constant: true,
                inputs: [],
                name: "getReserves",
                outputs: [
                    { name: "reserve0", type: "uint112" },
                    { name: "reserve1", type: "uint112" }
                ],
                payable: false,
                stateMutability: "view",
                type: "function"
            }
        ];

        const tokenAbi = [
            {
                constant: true,
                inputs: [{ name: "_owner", type: "address" }],
                name: "balanceOf",
                outputs: [{ name: "balance", type: "uint256" }],
                payable: false,
                stateMutability: "view",
                type: "function"
            }
        ];

        // Fetch DAI price from the LP contract
        async function fetchDAIPriceFromLP() {
            const lpContract = new web3.eth.Contract(lpAbi, lpContractAddress);
            try {
                const reserves = await lpContract.methods.getReserves().call();
                const reserveDAI = parseFloat(reserves.reserve0);
                const reserveOther = parseFloat(reserves.reserve1);
                const daiPrice = reserveOther / reserveDAI;
                console.log(`DAI Price from LP: $${daiPrice.toFixed(4)}`);
                return daiPrice;
            } catch (error) {
                console.error("Error fetching DAI price:", error);
                return null;
            }
        }

        // Fetch token price from Dexscreener API
        async function fetchTokenPrice(tokenAddress) {
            const url = `https://api.dexscreener.com/latest/dex/tokens/${tokenAddress}`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    console.error(`Error fetching price for token ${tokenAddress}: ${response.statusText}`);
                    return null;
                }
                const data = await response.json();
                if (data.pairs && data.pairs.length > 0 && data.pairs[0].priceUsd) {
                    return parseFloat(data.pairs[0].priceUsd);
                } else {
                    return null;
                }
            } catch (error) {
                console.error(`Error fetching token price for ${tokenAddress}:`, error);
                return null;
            }
        }

        // Fetch token balances from PulseChain API
        async function fetchTokenBalances(walletAddress) {
            const timestamp = Date.now();
            const url = `https://api.scan.pulsechain.com/api?module=account&action=tokenlist&address=${walletAddress}&timestamp=${timestamp}`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    console.error(`Error fetching token balances: ${response.statusText}`);
                    return null;
                }
                const data = await response.json();
                return data.result || [];
            } catch (error) {
                console.error("Error fetching token balances:", error);
                return null;
            }
        }

        // Fetch PLS price from CoinGecko API
        async function fetchPLSPrice() {
            const url = `https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=0xA1077a294dDE1B09bB078844df40758a5D0f9a27&vs_currencies=usd`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    console.error("Error fetching PLS price:", response.statusText);
                    return null;
                }
                const data = await response.json();
                return data["0xA1077a294dDE1B09bB078844df40758a5D0f9a27"]?.usd || null;
            } catch (error) {
                console.error("Error fetching PLS price:", error);
                return null;
            }
        }

        // Display all token balances
        async function displayBalances() {
            const walletAddress = "0xe101c45cb2352059139205177e29d16184db513b"; // Fixed wallet address
            const balanceDisplay = document.getElementById("balances");
            balanceDisplay.innerHTML = ""; // Clear previous results
            let totalValue = 0;
            let tokenData = [];

            // Fetch DAI price
            const daiPrice = await fetchDAIPriceFromLP();
            // Fetch native token price (PLS)
            const plsPrice = await fetchPLSPrice();

            // Token logo mapping
            const tokenLogos = {
                "Dai Stablecoin": "https://static.debank.com/image/pls_token/logo_url/0x6b175474e89094c44da98b954eedeac495271d0f/6b2caf7d28f665f3685fe937688e904f.png",
                "Dai Stablecoin from Ethereum": "https://static.debank.com/image/ckb_token/logo_url/0x317f8d18fb16e49a958becd0ea72f8e153d25654/61b18dee6896c6dab0684a78d0eee10a.png",
                "Incentive": "https://static.debank.com/image/pls_token/logo_url/0x2fa878ab3f87cc1c9737fc071108f904c0b0c95d/1a2faea3b101929bd0f97be85f65497a.png",
                "Princess Dai": "https://static.debank.com/image/pls_token/logo_url/0xae302f757864114545ecc9546291555c9a4e9b71/577aed403eac5e1b4ad5b66b969970d6.png",
                "X": "https://static.debank.com/image/pls_token/logo_url/0xa6c4790cc7aa22ca27327cb83276f2abd687b55b/304b4005796d74fb9a7f2acc3beea96b.png",
                "Hammer Time": "https://static.debank.com/image/pls_token/logo_url/0x0767ed257beee2f4659e31ab80aee3fd2d5cd81b/b1cbf77cc94dd2eaec7b1973bac25599.png",
                "PulseX": "https://static.debank.com/image/pls_token/logo_url/0x95b303987a60c71504d99aa1b13b4da07b0790ab/bb99797847300d2f1bd17ca74dfed310.png",
                "The Grays Currency": "https://static.debank.com/image/pls_token/logo_url/0x94534eeee131840b1c0f61847c572228bdfdde93/d8f19a62e24107497418121f66dc88b1.png",
                "HEX": "https://static.debank.com/image/eth_token/logo_url/0x2b591e99afe9f32eaa6214f7b7629768c40eeb39/94b9b8f71e29eebb278311d0af8d6147.png",
                "In The Know": "https://static.debank.com/image/pls_token/logo_url/0x9dc72e4ad4d11841993f6c0a087f5b9fb458aa7c/4bc9793e241d2635cc26a11b7262e5fc.png",
                "Tether USD from Ethereum": "https://static.debank.com/image/coin/logo_url/usdt/23af7472292cb41dc39b3f1146ead0fe.png",
                "Atropa": "https://static.debank.com/image/pls_token/logo_url/0xcc78a0acdf847a2c1714d2a925bb4477df5d48a6/3d8de145544d80ec75033f1987128067.png",
                "Wrapped Pulse": "https://static.debank.com/image/pls_token/logo_url/0xa1077a294dde1b09bb078844df40758a5d0f9a27/aa6be079fa9eb568e02150734ebb3db0.png"
            };

            // Fetch all token balances
            const balances = await fetchTokenBalances(walletAddress);
            if (balances && balances.length > 0) {
                for (const token of balances) {
                    const tokenName = token.name;
                    const tokenSymbol = token.symbol;
                    const tokenAddress = token.contractAddress.toLowerCase();
                    const tokenBalance = parseFloat(token.balance) / Math.pow(10, parseInt(token.decimals));
                    const fullTokenName = `${tokenName} (${tokenSymbol})`;

                    let tokenPrice;
                    if (tokenAddress === daiTokenAddress.toLowerCase() && tokenName === "Dai Stablecoin" && tokenSymbol === "DAI") {
                        tokenPrice = daiPrice;
                    } else if (tokenName === "Dai Stablecoin from Ethereum") {
                        tokenPrice = 1; // Assume 1:1 for DAI from Ethereum
                    } else {
                        tokenPrice = await fetchTokenPrice(tokenAddress);
                    }

                    if (tokenPrice) {
                        const tokenValue = tokenBalance * tokenPrice;
                        tokenData.push({ 
                            fullTokenName, 
                            tokenBalance, 
                            value: tokenValue,
                            logo: tokenLogos[tokenName] || tokenLogos["Wrapped Pulse"] 
                        });
                        totalValue += tokenValue;
                    }
                }
            }

            // Add PLS balance if available
            if (plsPrice) {
                const plsBalance = await web3.eth.getBalance(walletAddress);
                const plsBalanceInEther = web3.utils.fromWei(plsBalance, 'ether');
                const plsValue = parseFloat(plsBalanceInEther) * plsPrice;
                if (plsBalance > 0) {
                    tokenData.push({ 
                        fullTokenName: "PulseChain (PLS)", 
                        tokenBalance: parseFloat(plsBalanceInEther), 
                        value: plsValue, 
                        logo: tokenLogos["Wrapped Pulse"] 
                    });
                    totalValue += plsValue;
                }
            }

            // Sort tokens by value (highest to lowest)
            tokenData = tokenData.filter(token => token.value > 10).sort((a, b) => b.value - a.value);

            // Display sorted tokens
            tokenData.forEach((token) => {
                const tokenElement = document.createElement("div");
                tokenElement.classList.add("token");
                tokenElement.innerHTML = `
                    <img src="${token.logo}" alt="${token.fullTokenName} logo">
                    <span>${token.fullTokenName}: ${token.tokenBalance.toLocaleString(undefined, {minimumFractionDigits: 4, maximumFractionDigits: 4})} = <span style="color: var(--primary-color);">$${token.value.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></span>
                `;
                balanceDisplay.appendChild(tokenElement);
            });

            if (tokenData.length === 0) {
                balanceDisplay.innerText = "No token balances found or unable to fetch data.";
            }

            // Display total value
            const totalValueElement = document.createElement("div");
            totalValueElement.classList.add("total-value");
            totalValueElement.innerHTML = `Total Value: <span style="color: var(--primary-color);">$${totalValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>`;
            balanceDisplay.appendChild(totalValueElement);
        }

        // Adjust iframe sizes for mobile
        function adjustIframeSizes() {
            const iframes = document.querySelectorAll('iframe');
            const width = window.innerWidth;
            iframes.forEach(iframe => {
                if (width <= 768) {
                    iframe.width = width - 30;
                    iframe.height = (width - 30) * 9 / 16;
                } else {
                    iframe.width = '560';
                    iframe.height = '315';
                }
            });
        }

        // Call the function to fetch and display balances automatically when the page loads
        window.onload = () => {
            displayBalances();
            adjustIframeSizes();
        };
        window.addEventListener('resize', adjustIframeSizes);

        // Mobile menu toggle
        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");

        hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            navLinks.classList.toggle("active");
        });

        document.querySelectorAll(".nav-links a").forEach(n => n.addEventListener("click", () => {
            hamburger.classList.remove("active");
            navLinks.classList.remove("active");
        }));
    </script>
</body>
</html>

